# pytest.ini
[pytest]
# -----------------------------------------------------------------------------
# ðŸ§ª  Core options
# -----------------------------------------------------------------------------
addopts = -q --disable-warnings -rP --color=yes --log-cli-level=INFO
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# -----------------------------------------------------------------------------
# ðŸ§±  Logging & Output
# -----------------------------------------------------------------------------
log_cli = true
log_cli_format = %(asctime)s | %(levelname)-8s | %(message)s
log_cli_date_format = %H:%M:%S

# -----------------------------------------------------------------------------
# ðŸ§©  Markers for different test categories
# -----------------------------------------------------------------------------
markers =
    unit: mark a test as a fast, isolated unit test
    integration: mark a test that synthesizes or deploys to AWS (via CDK synth/deploy)
    slow: mark a long-running test (e.g., network provisioning)
    security: mark a test that validates IAM policies, SGs, or least-privilege setups

# -----------------------------------------------------------------------------
# ðŸ§¹  Pytest behavior
# -----------------------------------------------------------------------------
# fail tests immediately on first error (helpful for CI debugging)
# you can override this locally with `pytest -x` or remove if you prefer full run
xfail_strict = true